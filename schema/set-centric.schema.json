{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/schemas/strength-workout-set-centric.json",
  "title": "Strength Training Workout (Set-centric)",
  "type": "object",
  "required": ["workout_id", "date", "exercises"],
  "allOf": [
    {
      "$ref": "https://example.com/schemas/common-definitions.json#/$defs/workoutMetadata"
    }
  ],
  "properties": {
    "workout_id": true,
    "type": true,
    "date": true,
    "location": true,
    "notes": true,
    "statistics": {
      "$ref": "https://example.com/schemas/common-definitions.json#/$defs/statistics"
    },
    "exercises": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/$defs/exerciseBlock"
      }
    }
  },
  "$defs": {
    "exerciseBlock": {
      "type": "object",
      "required": ["name", "sets"],
      "properties": {
        "exercise_id": {
          "type": "string",
          "description": "Optional stable ID for the exercise"
        },
        "name": {
          "type": "string",
          "description": "Exercise name (e.g. Bench Press)"
        },
        "superset_id": {
          "type": "string",
          "description": "Exercises sharing the same ID are performed as a superset"
        },
        "equipment": {
          "$ref": "https://example.com/schemas/common-definitions.json#/$defs/equipment"
        },
        "sets": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/$defs/setWithNumber"
          }
        },
        "notes": {
          "type": "string"
        }
      }
    },
    "setWithNumber": {
      "type": "object",
      "required": ["setNumber", "repetitions", "weight"],
      "properties": {
        "setNumber": {
          "type": "integer",
          "minimum": 1,
          "description": "The sequential number of the set"
        },
        "repetitions": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of repetitions performed"
        },
        "weight": {
          "type": "object",
          "required": ["amount", "unit"],
          "properties": {
            "amount": {
              "type": "number",
              "minimum": 0,
              "description": "The numeric weight value"
            },
            "unit": {
              "$ref": "https://example.com/schemas/common-definitions.json#/$defs/weightUnit"
            }
          },
          "additionalProperties": false
        },
        "rpe": {
          "type": "number",
          "minimum": 1,
          "maximum": 10,
          "description": "Rate of Perceived Exertion"
        },
        "rir": {
          "type": "integer",
          "minimum": 0,
          "description": "Reps in Reserve"
        },
        "tempo": {
          "type": "string",
          "pattern": "^[0-9X]{3,4}$",
          "description": "E.g. 31X1"
        },
        "rest_sec": {
          "type": "integer",
          "minimum": 0
        },
        "completed": {
          "type": "boolean",
          "default": true
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
