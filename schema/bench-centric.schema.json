{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/schemas/strength-workout-bench-centric.json",
  "title": "Strength Training Workout (Bench-centric)",
  "type": "object",
  "required": ["workout_id", "date", "exercises"],
  "properties": {
    "workout_id": {
      "type": "string",
      "description": "Unique workout identifier"
    },
    "type": {
      "type": "string",
      "description": "Workout type identifier"
    },
    "date": {
      "type": "string",
      "format": "date-time"
    },
    "location": {
      "type": "string",
      "description": "Workout location or gym name"
    },
    "statistics": {
      "type": "object",
      "description": "Workout statistics and metrics",
      "properties": {
        "tracker": {
          "type": "string",
          "description": "Device or app used to track workout (e.g., Apple Watch, Garmin)"
        },
        "duration": {
          "type": "string",
          "pattern": "^\\d{2}:\\d{2}:\\d{2}$",
          "description": "Workout duration in HH:MM:SS format"
        },
        "bpm": {
          "type": "object",
          "description": "Heart rate statistics in beats per minute",
          "properties": {
            "average": {
              "type": "integer",
              "minimum": 0,
              "description": "Average heart rate"
            },
            "min": {
              "type": "integer",
              "minimum": 0,
              "description": "Minimum heart rate"
            },
            "max": {
              "type": "integer",
              "minimum": 0,
              "description": "Maximum heart rate"
            }
          }
        },
        "kcal": {
          "type": "object",
          "description": "Calorie expenditure",
          "properties": {
            "total": {
              "type": "integer",
              "minimum": 0,
              "description": "Total calories burned"
            }
          }
        }
      }
    },
    "notes": {
      "type": "string"
    },
    "exercises": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/$defs/exerciseBlock"
      }
    }
  },
  "$defs": {
    "exerciseBlock": {
      "type": "object",
      "required": ["name", "sets"],
      "properties": {
        "exercise_id": {
          "type": "string",
          "description": "Optional stable ID for the exercise"
        },
        "name": {
          "type": "string",
          "description": "Exercise name (e.g. Bench Press)"
        },
        "superset_id": {
          "type": "string",
          "description": "Exercises sharing the same ID are performed as a superset"
        },
        "equipment": {
          "type": "string",
          "enum": ["barbell", "dumbbell", "machine", "bodyweight", "cable", "other"]
        },
        "sets": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/$defs/set"
          }
        },
        "notes": {
          "type": "string"
        }
      }
    },
    "set": {
      "type": "object",
      "required": ["reps"],
      "properties": {
        "reps": {
          "type": "integer",
          "minimum": 0
        },
        "weight": {
          "type": "number",
          "minimum": 0,
          "description": "Load used (omit for bodyweight-only sets)"
        },
        "unit": {
          "type": "string",
          "enum": ["kg", "lb"]
        },
        "rpe": {
          "type": "number",
          "minimum": 1,
          "maximum": 10
        },
        "rir": {
          "type": "integer",
          "minimum": 0
        },
        "tempo": {
          "type": "string",
          "pattern": "^[0-9X]{3,4}$",
          "description": "E.g. 31X1"
        },
        "rest_sec": {
          "type": "integer",
          "minimum": 0
        },
        "completed": {
          "type": "boolean",
          "default": true
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
